CREATE TABLE User (
    userName TEXT PRIMARY KEY,
    userFullName TEXT,
    userPasswordHash TEXT
);

-- Bảng GroupChat
CREATE TABLE GroupChat (
    groupName TEXT PRIMARY KEY,
    groupPassword TEXT,
    groupDes TEXT,
    createdBy TEXT,
    FOREIGN KEY (createdBy) REFERENCES User(userName)
);

-- Bảng Message
CREATE TABLE Message (
    mesID INTEGER PRIMARY KEY AUTOINCREMENT,
    mesContent TEXT,
    date TEXT,
    userName TEXT,
    groupID INTEGER,
    FOREIGN KEY (userName) REFERENCES User(userName),
    FOREIGN KEY (groupName) REFERENCES GroupChat(groupName)
);

-- Bảng MemberOf
CREATE TABLE MemberOf (
    userName TEXT,
    groupName TEXT,
    role TEXT,
    joinAt TEXT,
    lastReadMessageID INTEGER,
    PRIMARY KEY (userName, groupName),
    FOREIGN KEY (userName) REFERENCES User(userName),
    FOREIGN KEY (groupName) REFERENCES GroupChat(groupName),
    FOREIGN KEY (lastReadMessageID) REFERENCES Message(mesID)
);